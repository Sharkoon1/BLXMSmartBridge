<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Definitions_08fv5bh" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="3.1.0">
  <bpmn:collaboration id="Collaboration_1d1gil1">
    <bpmn:participant id="Participant_1nswvk8" name="Swapper" processRef="Process_0bklywv" />
    <bpmn:participant id="Participant_1wcjzoz" name="Swap Service" processRef="Process_0w5dmah" />
    <bpmn:messageFlow id="MessageFlow_0u4tkug" sourceRef="Task_0zqu74v" targetRef="StartEvent_0jhpotc" />
    <bpmn:messageFlow id="MessageFlow_1on1zws" sourceRef="Task_1gwdkyj" targetRef="Task_16on4pt" />
    <bpmn:messageFlow id="MessageFlow_05pmq4q" sourceRef="Task_0bd44e0" targetRef="Task_16on4pt" />
  </bpmn:collaboration>
  <bpmn:process id="Process_0bklywv" isExecutable="true">
    <bpmn:startEvent id="StartEvent_1" name="Initiate BLXM swap">
      <bpmn:outgoing>SequenceFlow_0b03hu2</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:task id="Task_1w66pvp" name="Connect wallet">
      <bpmn:incoming>SequenceFlow_0b03hu2</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_06ok3wh</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="Task_02py9ib" name="Approve wallet to Swap">
      <bpmn:incoming>SequenceFlow_06ok3wh</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1cjb9nv</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="Task_0pt3egp" name="Enter Swap Amount">
      <bpmn:incoming>SequenceFlow_1cjb9nv</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0jamrvy</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="Task_0zqu74v" name="Swap">
      <bpmn:incoming>SequenceFlow_0jamrvy</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0pl3hb9</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="Task_16on4pt" name="Signed Withdraw on other Network">
      <bpmn:incoming>SequenceFlow_0pl3hb9</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_17u4pyk</bpmn:outgoing>
    </bpmn:task>
    <bpmn:endEvent id="EndEvent_0pyjsp1">
      <bpmn:incoming>SequenceFlow_17u4pyk</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="SequenceFlow_0b03hu2" sourceRef="StartEvent_1" targetRef="Task_1w66pvp" />
    <bpmn:sequenceFlow id="SequenceFlow_06ok3wh" sourceRef="Task_1w66pvp" targetRef="Task_02py9ib" />
    <bpmn:sequenceFlow id="SequenceFlow_1cjb9nv" sourceRef="Task_02py9ib" targetRef="Task_0pt3egp" />
    <bpmn:sequenceFlow id="SequenceFlow_0jamrvy" sourceRef="Task_0pt3egp" targetRef="Task_0zqu74v" />
    <bpmn:sequenceFlow id="SequenceFlow_17u4pyk" sourceRef="Task_16on4pt" targetRef="EndEvent_0pyjsp1" />
    <bpmn:sequenceFlow id="SequenceFlow_0pl3hb9" sourceRef="Task_0zqu74v" targetRef="Task_16on4pt" />
  </bpmn:process>
  <bpmn:process id="Process_0w5dmah" isExecutable="false">
    <bpmn:startEvent id="StartEvent_0jhpotc" name="Swap Initiated">
      <bpmn:outgoing>SequenceFlow_07mv9l1</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:task id="Task_0oqumgp" name="Collect price data on BLXM/USDC pair in both LP">
      <bpmn:incoming>SequenceFlow_07mv9l1</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1wah4zr</bpmn:outgoing>
    </bpmn:task>
    <bpmn:exclusiveGateway id="ExclusiveGateway_0p59y0l" name="Price diffence? input_/target_network?">
      <bpmn:incoming>SequenceFlow_1wah4zr</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1yqh8nv</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_0oq1a2h</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_07mv9l1" sourceRef="StartEvent_0jhpotc" targetRef="Task_0oqumgp" />
    <bpmn:sequenceFlow id="SequenceFlow_1wah4zr" sourceRef="Task_0oqumgp" targetRef="ExclusiveGateway_0p59y0l" />
    <bpmn:sequenceFlow id="SequenceFlow_1yqh8nv" name="no" sourceRef="ExclusiveGateway_0p59y0l" targetRef="ExclusiveGateway_167ulxe" />
    <bpmn:sequenceFlow id="SequenceFlow_1mhuxh1" sourceRef="Task_04322ji" targetRef="Task_1gwdkyj" />
    <bpmn:sequenceFlow id="SequenceFlow_0pyoh0f" name="no" sourceRef="ExclusiveGateway_167ulxe" targetRef="Task_0bd44e0" />
    <bpmn:sequenceFlow id="SequenceFlow_0zm37ui" name="target_network = expensive_BLXM" sourceRef="ExclusiveGateway_04ceimq" targetRef="ExclusiveGateway_167ulxe" />
    <bpmn:sequenceFlow id="SequenceFlow_084u5hy" name="target_network = cheap_BLXM" sourceRef="ExclusiveGateway_04ceimq" targetRef="Task_0bd44e0" />
    <bpmn:sequenceFlow id="SequenceFlow_0oq1a2h" name="yes" sourceRef="ExclusiveGateway_0p59y0l" targetRef="ExclusiveGateway_04ceimq" />
    <bpmn:exclusiveGateway id="ExclusiveGateway_04ceimq" name="Swap to what network?">
      <bpmn:incoming>SequenceFlow_0oq1a2h</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0zm37ui</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_084u5hy</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:task id="Task_0bd44e0" name="Swap to adress via 1:1 bridge">
      <bpmn:incoming>SequenceFlow_0pyoh0f</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_084u5hy</bpmn:incoming>
    </bpmn:task>
    <bpmn:exclusiveGateway id="ExclusiveGateway_167ulxe" name="enough liquidity of (cheap_BLXM) in abitrage pool to execute swap?">
      <bpmn:incoming>SequenceFlow_0zm37ui</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_1yqh8nv</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0pyoh0f</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_1k7l9sc</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_1k7l9sc" name="yes" sourceRef="ExclusiveGateway_167ulxe" targetRef="Task_1h9ra8g" />
    <bpmn:task id="Task_1h9ra8g" name="Fairer exchangerate expensive_BLXM to cheap_BLXM of (1 + true_exchange rate) / 2">
      <bpmn:incoming>SequenceFlow_1k7l9sc</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1fwfcgr</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="Task_04322ji" name="Add profit (1- true_exchangerate) / 2 as liquidity to abitrage pool">
      <bpmn:incoming>SequenceFlow_1fwfcgr</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1mhuxh1</bpmn:outgoing>
    </bpmn:task>
    <bpmn:sequenceFlow id="SequenceFlow_1fwfcgr" sourceRef="Task_1h9ra8g" targetRef="Task_04322ji" />
    <bpmn:task id="Task_1gwdkyj" name="Release tokens from abitrage pool to target_network">
      <bpmn:incoming>SequenceFlow_1mhuxh1</bpmn:incoming>
    </bpmn:task>
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_1d1gil1">
      <bpmndi:BPMNShape id="Participant_1nswvk8_di" bpmnElement="Participant_1nswvk8" isHorizontal="true">
        <dc:Bounds x="156" y="81" width="1166" height="160" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
        <dc:Bounds x="227" y="137" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="213" y="180" width="66" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_1w66pvp_di" bpmnElement="Task_1w66pvp">
        <dc:Bounds x="314" y="115" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_02py9ib_di" bpmnElement="Task_02py9ib">
        <dc:Bounds x="474" y="115" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_0pt3egp_di" bpmnElement="Task_0pt3egp">
        <dc:Bounds x="632" y="115" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_16on4pt_di" bpmnElement="Task_16on4pt">
        <dc:Bounds x="929" y="115" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0b03hu2_di" bpmnElement="SequenceFlow_0b03hu2">
        <di:waypoint x="263" y="155" />
        <di:waypoint x="314" y="155" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_06ok3wh_di" bpmnElement="SequenceFlow_06ok3wh">
        <di:waypoint x="414" y="155" />
        <di:waypoint x="474" y="155" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1cjb9nv_di" bpmnElement="SequenceFlow_1cjb9nv">
        <di:waypoint x="574" y="155" />
        <di:waypoint x="632" y="155" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0jamrvy_di" bpmnElement="SequenceFlow_0jamrvy">
        <di:waypoint x="732" y="155" />
        <di:waypoint x="780" y="155" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="EndEvent_0pyjsp1_di" bpmnElement="EndEvent_0pyjsp1">
        <dc:Bounds x="1096" y="137" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_17u4pyk_di" bpmnElement="SequenceFlow_17u4pyk">
        <di:waypoint x="1029" y="155" />
        <di:waypoint x="1096" y="155" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Task_0zqu74v_di" bpmnElement="Task_0zqu74v">
        <dc:Bounds x="780" y="115" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0pl3hb9_di" bpmnElement="SequenceFlow_0pl3hb9">
        <di:waypoint x="880" y="155" />
        <di:waypoint x="929" y="155" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_1wcjzoz_di" bpmnElement="Participant_1wcjzoz" isHorizontal="true">
        <dc:Bounds x="156" y="242" width="1166" height="555" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="StartEvent_0jhpotc_di" bpmnElement="StartEvent_0jhpotc">
        <dc:Bounds x="213" y="380" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="197" y="423" width="70" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="MessageFlow_0u4tkug_di" bpmnElement="MessageFlow_0u4tkug">
        <di:waypoint x="830" y="195" />
        <di:waypoint x="830" y="260" />
        <di:waypoint x="231" y="260" />
        <di:waypoint x="231" y="380" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Task_0oqumgp_di" bpmnElement="Task_0oqumgp">
        <dc:Bounds x="313" y="358" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_07mv9l1_di" bpmnElement="SequenceFlow_07mv9l1">
        <di:waypoint x="249" y="398" />
        <di:waypoint x="313" y="398" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ExclusiveGateway_0p59y0l_di" bpmnElement="ExclusiveGateway_0p59y0l" isMarkerVisible="true">
        <dc:Bounds x="477" y="373" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="460" y="323" width="84" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1wah4zr_di" bpmnElement="SequenceFlow_1wah4zr">
        <di:waypoint x="413" y="398" />
        <di:waypoint x="477" y="398" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Task_04322ji_di" bpmnElement="Task_04322ji">
        <dc:Bounds x="915" y="683" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1yqh8nv_di" bpmnElement="SequenceFlow_1yqh8nv">
        <di:waypoint x="502" y="423" />
        <di:waypoint x="502" y="607" />
        <di:waypoint x="531" y="607" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="482" y="518" width="13" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Task_1gwdkyj_di" bpmnElement="Task_1gwdkyj">
        <dc:Bounds x="1167" y="683" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="MessageFlow_1on1zws_di" bpmnElement="MessageFlow_1on1zws">
        <di:waypoint x="1217" y="683" />
        <di:waypoint x="1217" y="277" />
        <di:waypoint x="979" y="277" />
        <di:waypoint x="979" y="195" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ExclusiveGateway_04ceimq_di" bpmnElement="ExclusiveGateway_04ceimq" isMarkerVisible="true">
        <dc:Bounds x="578" y="373" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="569" y="335.5" width="67" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1mhuxh1_di" bpmnElement="SequenceFlow_1mhuxh1">
        <di:waypoint x="1015" y="723" />
        <di:waypoint x="1167" y="723" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Task_0bd44e0_di" bpmnElement="Task_0bd44e0">
        <dc:Bounds x="718" y="358" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="MessageFlow_05pmq4q_di" bpmnElement="MessageFlow_05pmq4q">
        <di:waypoint x="768" y="354" />
        <di:waypoint x="768" y="277" />
        <di:waypoint x="955" y="277" />
        <di:waypoint x="955" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ExclusiveGateway_167ulxe_di" bpmnElement="ExclusiveGateway_167ulxe" isMarkerVisible="true">
        <dc:Bounds x="531" y="582" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="513" y="516" width="86" height="53" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0pyoh0f_di" bpmnElement="SequenceFlow_0pyoh0f">
        <di:waypoint x="581" y="607" />
        <di:waypoint x="768" y="607" />
        <di:waypoint x="768" y="440" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="669" y="589" width="13" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0zm37ui_di" bpmnElement="SequenceFlow_0zm37ui">
        <di:waypoint x="603" y="423" />
        <di:waypoint x="603" y="594" />
        <di:waypoint x="568" y="594" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="630" y="368" width="86" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_084u5hy_di" bpmnElement="SequenceFlow_084u5hy">
        <di:waypoint x="628" y="398" />
        <di:waypoint x="718" y="398" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="562" y="472" width="82" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0oq1a2h_di" bpmnElement="SequenceFlow_0oq1a2h">
        <di:waypoint x="527" y="398" />
        <di:waypoint x="578" y="398" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="548" y="401" width="17" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Task_1h9ra8g_di" bpmnElement="Task_1h9ra8g">
        <dc:Bounds x="718" y="683" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1k7l9sc_di" bpmnElement="SequenceFlow_1k7l9sc">
        <di:waypoint x="556" y="632" />
        <di:waypoint x="556" y="723" />
        <di:waypoint x="718" y="723" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="614" y="699" width="17" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1fwfcgr_di" bpmnElement="SequenceFlow_1fwfcgr">
        <di:waypoint x="818" y="723" />
        <di:waypoint x="915" y="723" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
